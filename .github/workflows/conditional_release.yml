name: conditional-release 

on:
  push:
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+'
      - 'v[0-9]+.[0-9]+.[0-9]+-dev'
      - 'v[0-9]+.[0-9]+.[0-9]+.rc[0-9]+'    
      - 'v[0-9]+.[0-9]+.[0-9]+.rc[0-9]+-dev'
      - 'v[0-9]+.[0-9]+.[0-9]+.alpha[0-9]+'
      - 'v[0-9]+.[0-9]+.[0-9]+.alpha[0-9]+-dev'
      - 'v[0-9]+.[0-9]+.[0-9]+.beta[0-9]+'
      - 'v[0-9]+.[0-9]+.[0-9]+.beta[0-9]+-dev'      

env:
  RELEASE: false

jobs: 
  test:
    runs-on: ubuntu-latest 
    steps: 
      - name: Check Tag 
        id: check-tag 
        run: | 
             if [[ ${{ github.event.ref }} =~ ^refs/tags/v[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
              echo "match=true" >> $RELEASE
             fi
             echo "Release : $RELEASE"


  publish_doc: 
    needs: test 
    uses: ./.github/workflows/publish.yml

