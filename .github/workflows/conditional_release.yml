name: conditional-release 

on:
  push:
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+'
      - 'v[0-9]+.[0-9]+.[0-9]+-dev'
      - 'v[0-9]+.[0-9]+.[0-9]+.rc[0-9]+'    
      - 'v[0-9]+.[0-9]+.[0-9]+.rc[0-9]+-dev'
      - 'v[0-9]+.[0-9]+.[0-9]+.alpha[0-9]+'
      - 'v[0-9]+.[0-9]+.[0-9]+.alpha[0-9]+-dev'
      - 'v[0-9]+.[0-9]+.[0-9]+.beta[0-9]+'
      - 'v[0-9]+.[0-9]+.[0-9]+.beta[0-9]+-dev'      


jobs: 
  test:
    runs-on: ubuntu-latest 
    outputs: 
      release: ${{ steps.check-tag.outputs.release }}
    steps: 
      - name: Check Tag 
        id: check-tag 
        run: | 
             if [[ ${{ github.event.ref }} =~ ^refs/tags/v[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
              echo "release=true" >> "$GITHUB_OUTPUT"
             fi
  echo: 
    runs-on: ubuntu-latest
    needs: test 
    steps:
      - env:
          OUTPUT1: ${{needs.test.outputs.release}}
        run: echo "$OUTPUT1 "

  publish_doc: 
    needs: test 
    uses: ./.github/workflows/publish.yml

